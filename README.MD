# Gerenciador de Comandas

![Java](https://img.shields.io/badge/Java-17-orange?style=for-the-badge&logo=java)
![Spring](https://img.shields.io/badge/Spring_Boot-3.5.0-green?style=for-the-badge&logo=spring)
![Status](https://img.shields.io/badge/Status-Em_Desenvolvimento-yellow?style=for-the-badge)

Sistema de gerenciamento de comandas e estoque construÃ­do com Spring Boot. Esta API permite o cadastro, consulta, atualizaÃ§Ã£o e exclusÃ£o lÃ³gica de produtos, seus respectivos estoques e comandas de clientes.

---

## ğŸ“‹ Ãndice

- [ğŸ” VisÃ£o Geral](#-visÃ£o-geral)
- [ğŸš€ Principais Funcionalidades](#-principais-funcionalidades)
- [ğŸ’» Tecnologias](#-tecnologias)
- [ğŸ”§ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o](#-instalaÃ§Ã£o-e-configuraÃ§Ã£o)
- [ğŸ“ Uso da API](#-uso-da-api)
- [ğŸ—ƒï¸ Estrutura do Banco de Dados](#ï¸-estrutura-do-banco-de-dados)
- [ğŸ§ª Testes Automatizados](#-testes-automatizados)
- [ğŸ”® ImplementaÃ§Ãµes Futuras](#-implementaÃ§Ãµes-futuras)
- [ğŸ“š DocumentaÃ§Ã£o da API](#-documentaÃ§Ã£o-da-api)

---

## ğŸ” VisÃ£o Geral

O Gerenciador de Comandas Ã© um sistema de backend para o controle de estabelecimentos comerciais. Ele permite registrar produtos, controlar a quantidade em estoque e gerenciar o ciclo de vida das comandas dos clientes, desde a abertura atÃ© o fechamento ou cancelamento.

---

## ğŸš€ Principais Funcionalidades

### ğŸ›ï¸ Gerenciamento de Produtos

- Cadastro de produtos com nome, preÃ§o e cÃ³digo de barras.
- AtualizaÃ§Ã£o e inativaÃ§Ã£o (soft delete).
- Listagem de todos os produtos ativos.
- Consulta por ID.

### ğŸ“¦ Controle de Estoque

- CriaÃ§Ã£o automÃ¡tica de controle de estoque ao cadastrar um produto.
- Consulta, adiÃ§Ã£o e subtraÃ§Ã£o de saldo.
- ValidaÃ§Ãµes de saldo ao manipular comandas.

### ğŸ“‹ GestÃ£o de Comandas

- Abertura de comanda para clientes.
- AdiÃ§Ã£o, ediÃ§Ã£o e remoÃ§Ã£o de produtos.
- CÃ¡lculo automÃ¡tico do valor total.
- AlteraÃ§Ã£o de status (ABERTA, FECHADA, CANCELADA).
- DevoluÃ§Ã£o automÃ¡tica de estoque ao cancelar uma comanda.

---

## ğŸ’» Tecnologias

- **Java 17**
- **Spring Boot 3.5.0**
- **Spring Data JPA**
- **MapStruct**
- **H2 Database**
- **Lombok**
- **Swagger/OpenAPI (springdoc)**
- **Maven**

---

## ğŸ”§ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### PrÃ©-requisitos

- Java 17+
- Maven 3.6.3+

### Passos

```bash
git clone https://github.com/TallesAndrade/GerenciadorComandas.git
cd GerenciadorComandas
mvn clean install
mvn spring-boot:run
```

Acesse a aplicaÃ§Ã£o em: `http://localhost:8080`

---

## ğŸ“ Uso da API

### Endpoints de Produto

| MÃ©todo  | Rota             | DescriÃ§Ã£o                           |
|---------|------------------|-------------------------------------|
| `POST`  | `/produtos`      | Cadastra um novo produto.           |
| `GET`   | `/produtos`      | Lista todos os produtos ativos.     |
| `GET`   | `/produtos/{id}` | Busca um produto por ID.            |
| `PATCH` | `/produtos/{id}` | Atualiza um produto existente.      |
| `DELETE`| `/produtos/{id}` | Inativa um produto (soft delete).   |

### Endpoints de Estoque

| MÃ©todo  | Rota                         | DescriÃ§Ã£o                                  |
|---------|------------------------------|--------------------------------------------|
| `GET`   | `/estoque`                   | Lista todo o estoque.                      |
| `GET`   | `/estoque/{id}`              | Consulta o saldo de um produto.            |
| `PATCH` | `/estoque/{id}/adicionarsaldo` | Adiciona saldo ao estoque.                 |
| `PATCH` | `/estoque/{id}/removersaldo`  | Remove saldo do estoque.                   |
| `DELETE`| `/estoque/{id}`              | Remove o registro (se saldo for zero).     |

### Endpoints de Comanda

| MÃ©todo  | Rota                        | DescriÃ§Ã£o                                     |
|---------|-----------------------------|-----------------------------------------------|
| `POST`  | `/comandas`                 | Cria uma nova comanda para um cliente.        |
| `POST`  | `/comandas/{id}/produtos`   | Adiciona produto Ã  comanda.                   |
| `PATCH` | `/comandas/{id}/itens`      | Edita a quantidade de um produto.             |
| `DELETE`| `/comandas/{id}/itens/{id}` | Remove produto da comanda.                    |
| `PATCH` | `/comandas/{id}/status`     | Altera status para FECHADA ou CANCELADA.      |
| `GET`   | `/comandas/{id}`            | Busca comanda por ID.                         |
| `GET`   | `/comandas`                 | Lista comandas com status ABERTA.             |

---

## ğŸ—ƒï¸ Estrutura do Banco de Dados

Gerenciada automaticamente com Spring Data JPA. Tabelas principais:

- `db_produtos` â€“ Produtos cadastrados
- `db_estoque` â€“ Controle de estoque
- `db_comandas` â€“ Registro de comandas
- `db_produto_comanda` â€“ RelaÃ§Ã£o produto â†” comanda

---

## ğŸ§ª Testes Automatizados

O projeto inclui testes unitÃ¡rios com **JUnit 5** e **Mockito**, cobrindo:

- Cadastro de produtos
- CriaÃ§Ã£o de estoque
- Listagem de produtos
- Retorno por ID

âœ… Cobertura de testes estÃ¡ em expansÃ£o para comandas e estoque.

---

## ğŸ”® ImplementaÃ§Ãµes Futuras

- **Spring Security + JWT** para autenticaÃ§Ã£o.
- **RelatÃ³rios em PDF** (comandas fechadas e estoque baixo).
- **MigraÃ§Ã£o para PostgreSQL** no ambiente de produÃ§Ã£o.
- **Cobertura total de testes unitÃ¡rios e integraÃ§Ã£o**.
- **FinalizaÃ§Ã£o da suÃ­te completa de testes**.

---

## ğŸ“š DocumentaÃ§Ã£o da API

Acesse apÃ³s iniciar a aplicaÃ§Ã£o:

- Swagger UI: [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)
- Console H2: [http://localhost:8080/h2-console](http://localhost:8080/h2-console)
    - JDBC URL: `jdbc:h2:file:./data/gerenciador-comandas-db`
    - UsuÃ¡rio: `sa`
    - Senha: `password`

---

> Projeto criado com foco em aprendizado e boas prÃ¡ticas. Em constante evoluÃ§Ã£o. ğŸš§